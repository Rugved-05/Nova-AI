import{a as C,f as L,d as $e,t as ls,c as ri}from"../chunks/CUN6wchY.js";import"../chunks/BurXaNgX.js";import{w as ot,a as ai,b as nt,o as _t}from"../chunks/CK6mn_4X.js";import{m as _e,n as oi,O as li,g as c,Q as ci,U as ui,V as cs,F as At,W as Tt,D as ct,aD as hi,aK as di,av as us,H as Fe,L as qt,aQ as fi,N as vi,aa as pi,aR as Is,aJ as jt,aS as mi,ah as hs,aT as gi,aU as yi,a1 as J,A as _i,y as Ct,aV as Ce,aW as Rs,I as xs,K as Ns,aX as It,Z as Os,aY as bi,aZ as wi,aH as Si,J as Ei,aE as ki,$ as Ai,a_ as Ti,a$ as Ci,b0 as Ii,b1 as Ri,b2 as xi,b3 as Ni,b4 as Oi,b5 as Ls,b6 as Li,aN as Mi,b as R,Y as Bi,b7 as Di,p as Ie,k as d,l as h,s as u,e as it,t as Q,j as Re,b8 as Ms,a2 as z,i as rt,aP as ds,b9 as Ke,ba as Qt,aw as Xt}from"../chunks/IImCMv-Z.js";import{s as j,e as Z}from"../chunks/aYSWzEL-.js";import{p as Pe,i as H,b as bt,s as ze,a as ke}from"../chunks/DCSeNEyV.js";import{i as xe}from"../chunks/CYy9pKZS.js";function wt(s,e){return e}function Pi(s,e,t){for(var i=[],n=e.length,r,a=e.length,o=0;o<n;o++){let w=e[o];Ns(w,()=>{if(r){if(r.pending.delete(w),r.done.add(w),r.pending.size===0){var v=s.outrogroups;Ut(jt(r.done)),v.delete(r),v.size===0&&(s.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=i.length===0&&t!==null;if(l){var m=t,p=m.parentNode;Si(p),p.append(m),s.items.clear()}Ut(e,!l)}else r={pending:new Set(e),done:new Set},(s.outrogroups??(s.outrogroups=new Set)).add(r)}function Ut(s,e=!0){for(var t=0;t<s.length;t++)Ei(s[t],e)}var fs;function Ye(s,e,t,i,n,r=null){var a=s,o=new Map,l=(e&Rs)!==0;if(l){var m=s;a=_e?At(_i(m)):m.appendChild(Ct())}_e&&oi();var p=null,w=pi(()=>{var _=t();return Is(_)?_:_==null?[]:jt(_)}),v,y=!0;function T(){f.fallback=p,Vi(f,v,a,e,i),p!==null&&(v.length===0?(p.f&Ce)===0?xs(p):(p.f^=Ce,et(p,null,a)):Ns(p,()=>{p=null}))}var D=li(()=>{v=c(w);var _=v.length;let x=!1;if(_e){var $=ci(a)===ui;$!==(_===0)&&(a=cs(),At(a),Tt(!1),x=!0)}for(var k=new Set,I=Fe,A=vi(),S=0;S<_;S+=1){_e&&ct.nodeType===hi&&ct.data===di&&(a=ct,x=!0,Tt(!1));var P=v[S],M=i(P,S),V=y?null:o.get(M);V?(V.v&&us(V.v,P),V.i&&us(V.i,S),A&&I.unskip_effect(V.e)):(V=qi(o,y?a:fs??(fs=Ct()),P,M,S,n,e,t),y||(V.e.f|=Ce),o.set(M,V)),k.add(M)}if(_===0&&r&&!p&&(y?p=qt(()=>r(a)):(p=qt(()=>r(fs??(fs=Ct()))),p.f|=Ce)),_>k.size&&fi(),_e&&_>0&&At(cs()),!y)if(A){for(const[X,ee]of o)k.has(X)||I.skip_effect(ee.e);I.oncommit(T),I.ondiscard(()=>{})}else T();x&&Tt(!0),c(w)}),f={effect:D,items:o,outrogroups:null,fallback:p};y=!1,_e&&(a=ct)}function je(s){for(;s!==null&&(s.f&bi)===0;)s=s.next;return s}function Vi(s,e,t,i,n){var V,X,ee,ne,re,he,te,de,q;var r=(i&wi)!==0,a=e.length,o=s.items,l=je(s.effect.first),m,p=null,w,v=[],y=[],T,D,f,_;if(r)for(_=0;_<a;_+=1)T=e[_],D=n(T,_),f=o.get(D).e,(f.f&Ce)===0&&((X=(V=f.nodes)==null?void 0:V.a)==null||X.measure(),(w??(w=new Set)).add(f));for(_=0;_<a;_+=1){if(T=e[_],D=n(T,_),f=o.get(D).e,s.outrogroups!==null)for(const g of s.outrogroups)g.pending.delete(f),g.done.delete(f);if((f.f&Ce)!==0)if(f.f^=Ce,f===l)et(f,null,t);else{var x=p?p.next:l;f===s.effect.last&&(s.effect.last=f.prev),f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),Le(s,p,f),Le(s,f,x),et(f,x,t),p=f,v=[],y=[],l=je(p.next);continue}if((f.f&It)!==0&&(xs(f),r&&((ne=(ee=f.nodes)==null?void 0:ee.a)==null||ne.unfix(),(w??(w=new Set)).delete(f))),f!==l){if(m!==void 0&&m.has(f)){if(v.length<y.length){var $=y[0],k;p=$.prev;var I=v[0],A=v[v.length-1];for(k=0;k<v.length;k+=1)et(v[k],$,t);for(k=0;k<y.length;k+=1)m.delete(y[k]);Le(s,I.prev,A.next),Le(s,p,I),Le(s,A,$),l=$,p=A,_-=1,v=[],y=[]}else m.delete(f),et(f,l,t),Le(s,f.prev,f.next),Le(s,f,p===null?s.effect.first:p.next),Le(s,p,f),p=f;continue}for(v=[],y=[];l!==null&&l!==f;)(m??(m=new Set)).add(l),y.push(l),l=je(l.next);if(l===null)continue}(f.f&Ce)===0&&v.push(f),p=f,l=je(f.next)}if(s.outrogroups!==null){for(const g of s.outrogroups)g.pending.size===0&&(Ut(jt(g.done)),(re=s.outrogroups)==null||re.delete(g));s.outrogroups.size===0&&(s.outrogroups=null)}if(l!==null||m!==void 0){var S=[];if(m!==void 0)for(f of m)(f.f&It)===0&&S.push(f);for(;l!==null;)(l.f&It)===0&&l!==s.fallback&&S.push(l),l=je(l.next);var P=S.length;if(P>0){var M=(i&Rs)!==0&&a===0?t:null;if(r){for(_=0;_<P;_+=1)(te=(he=S[_].nodes)==null?void 0:he.a)==null||te.measure();for(_=0;_<P;_+=1)(q=(de=S[_].nodes)==null?void 0:de.a)==null||q.fix()}Pi(s,S,M)}}r&&Os(()=>{var g,B;if(w!==void 0)for(f of w)(B=(g=f.nodes)==null?void 0:g.a)==null||B.apply()})}function qi(s,e,t,i,n,r,a,o){var l=(a&gi)!==0?(a&yi)===0?J(t,!1,!1):hs(t):null,m=(a&mi)!==0?hs(n):null;return{v:l,i:m,e:qt(()=>(r(e,l??t,m??n,o),()=>{s.delete(i)}))}}function et(s,e,t){if(s.nodes)for(var i=s.nodes.start,n=s.nodes.end,r=e&&(e.f&Ce)===0?e.nodes.start:t;i!==null;){var a=ki(i);if(r.before(i),i===n)return;i=a}}function Le(s,e,t){e===null?s.effect.first=t:e.next=t,t===null?s.effect.last=e:t.prev=e}const vs=[...` 	
\r\fÂ \v\uFEFF`];function Ui(s,e,t){var i=s==null?"":""+s;if(e&&(i=i?i+" "+e:e),t){for(var n of Object.keys(t))if(t[n])i=i?i+" "+n:n;else if(i.length)for(var r=n.length,a=0;(a=i.indexOf(n,a))>=0;){var o=a+r;(a===0||vs.includes(i[a-1]))&&(o===i.length||vs.includes(i[o]))?i=(a===0?"":i.substring(0,a))+i.substring(o+1):a=o}}return i===""?null:i}function $i(s,e){return s==null?null:String(s)}function ge(s,e,t,i,n,r){var a=s.__className;if(_e||a!==t||a===void 0){var o=Ui(t,i,r);(!_e||o!==s.getAttribute("class"))&&(o==null?s.removeAttribute("class"):s.className=o),s.__className=t}else if(r&&n!==r)for(var l in r){var m=!!r[l];(n==null||m!==!!n[l])&&s.classList.toggle(l,m)}return r}function Qe(s,e,t,i){var n=s.__style;if(_e||n!==e){var r=$i(e);(!_e||r!==s.getAttribute("style"))&&(r==null?s.removeAttribute("style"):s.style.cssText=r),s.__style=e}return i}function $t(s,e,t=!1){if(s.multiple){if(e==null)return;if(!Is(e))return Ti();for(var i of s.options)i.selected=e.includes(ms(i));return}for(i of s.options){var n=ms(i);if(Ci(n,e)){i.selected=!0;return}}(!t||e!==void 0)&&(s.selectedIndex=-1)}function ps(s){var e=new MutationObserver(()=>{$t(s,s.__value)});e.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ai(()=>{e.disconnect()})}function ms(s){return"__value"in s?s.__value:s.value}const zi=Symbol("is custom element"),Hi=Symbol("is html"),Fi=Ls?"link":"LINK",Ki=Ls?"progress":"PROGRESS";function Ve(s){if(_e){var e=!1,t=()=>{if(!e){if(e=!0,s.hasAttribute("value")){var i=s.value;at(s,"value",null),s.value=i}if(s.hasAttribute("checked")){var n=s.checked;at(s,"checked",null),s.checked=n}}};s.__on_r=t,Os(t),Ni()}}function Rt(s,e){var t=Zt(s);t.value===(t.value=e??void 0)||s.value===e&&(e!==0||s.nodeName!==Ki)||(s.value=e??"")}function Yi(s,e){var t=Zt(s);t.checked!==(t.checked=e??void 0)&&(s.checked=e)}function at(s,e,t,i){var n=Zt(s);_e&&(n[e]=s.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&s.nodeName===Fi)||n[e]!==(n[e]=t)&&(e==="loading"&&(s[Oi]=t),t==null?s.removeAttribute(e):typeof t!="string"&&Wi(s).includes(e)?s[e]=t:s.setAttribute(e,t))}function Zt(s){return s.__attributes??(s.__attributes={[zi]:s.nodeName.includes("-"),[Hi]:s.namespaceURI===Ii})}var gs=new Map;function Wi(s){var e=s.getAttribute("is")||s.nodeName,t=gs.get(e);if(t)return t;gs.set(e,t=[]);for(var i,n=s,r=Element.prototype;r!==n;){i=xi(n);for(var a in i)i[a].set&&t.push(a);n=Ri(n)}return t}function xt(s,e,t=e){var i=new WeakSet;Li(s,"input",async n=>{var r=n?s.defaultValue:s.value;if(r=Nt(s)?Ot(r):r,t(r),Fe!==null&&i.add(Fe),await Mi(),r!==(r=e())){var a=s.selectionStart,o=s.selectionEnd,l=s.value.length;if(s.value=r??"",o!==null){var m=s.value.length;a===o&&o===l&&m>l?(s.selectionStart=m,s.selectionEnd=m):(s.selectionStart=a,s.selectionEnd=Math.min(o,m))}}}),(_e&&s.defaultValue!==s.value||R(e)==null&&s.value)&&(t(Nt(s)?Ot(s.value):s.value),Fe!==null&&i.add(Fe)),Bi(()=>{var n=e();if(s===document.activeElement){var r=Di??Fe;if(i.has(r))return}Nt(s)&&n===Ot(s.value)||s.type==="date"&&!n&&!s.value||n!==s.value&&(s.value=n??"")})}function Nt(s){var e=s.type;return e==="number"||e==="range"}function Ot(s){return s===""?null:+s}function Gi(){const{subscribe:s,set:e,update:t}=ot({conversationId:null,messages:[],isLoading:!1});return{subscribe:s,init(i){t(n=>({...n,conversationId:i}))},addMessage(i,n,r=[]){t(a=>({...a,messages:[...a.messages,{role:i,content:n,commands:r,timestamp:new Date().toISOString()}]}))},addStreamingMessage(){t(i=>({...i,messages:[...i.messages,{role:"assistant",content:"",commands:[],timestamp:new Date().toISOString(),streaming:!0}]}))},updateStreamingMessage(i){t(n=>{const r=[...n.messages],a=r.length-1;return a>=0&&r[a].streaming&&(r[a]={...r[a],content:i}),{...n,messages:r}})},completeStreamingMessage(i,n=[]){t(r=>{const a=[...r.messages],o=a.length-1;return o>=0&&a[o].streaming&&(a[o]={...a[o],content:i,commands:n,streaming:!1}),{...r,messages:a}})},updateLastAssistant(i){t(n=>{const r=[...n.messages];for(let a=r.length-1;a>=0;a--)if(r[a].role==="assistant"){r[a]={...r[a],content:i};break}return{...n,messages:r}})},setLoading(i){t(n=>({...n,isLoading:i}))},clear(){e({conversationId:null,messages:[],isLoading:!1})},loadMessages(i,n){e({conversationId:i,messages:n,isLoading:!1})}}}const ce=Gi();var Ji=$e('<svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>'),ji=$e('<svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M12 2a2 2 0 012 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 017 7h1a1 1 0 110 2h-1.17A7 7 0 0113 21.93V22h-2v-.07A7 7 0 013.17 16H2a1 1 0 110-2h1a7 7 0 017-7h1V5.73A2 2 0 0112 2zm0 7a5 5 0 00-5 5 5 5 0 005 5 5 5 0 005-5 5 5 0 00-5-5zm0 2a3 3 0 013 3 3 3 0 01-3 3 3 3 0 01-3-3 3 3 0 013-3z"></path></svg>'),Qi=L('<span class="time svelte-1e5n1dp"> </span>'),Xi=L('<span class="cmd-icon svelte-1e5n1dp">&#9748;</span>'),Zi=L('<span class="cmd-icon svelte-1e5n1dp">&#128240;</span>'),en=L('<span class="cmd-icon svelte-1e5n1dp">&#128279;</span>'),tn=L('<span class="cmd-icon svelte-1e5n1dp">&#9881;</span>'),sn=L('<div class="command-badge svelte-1e5n1dp"><!> <span> </span></div>'),nn=L('<div class="commands svelte-1e5n1dp"></div>'),rn=L('<div><div class="avatar svelte-1e5n1dp"><!></div> <div class="content-wrapper svelte-1e5n1dp"><div class="meta svelte-1e5n1dp"><span class="role-label svelte-1e5n1dp"> </span> <!></div> <div class="text svelte-1e5n1dp"> </div> <!></div></div>');function an(s,e){Ie(e,!1);let t=Pe(e,"role",8,"user"),i=Pe(e,"content",8,""),n=Pe(e,"timestamp",8,""),r=Pe(e,"commands",24,()=>[]);function a(A){return A?new Date(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}xe();var o=rn(),l=d(o),m=d(l);{var p=A=>{var S=Ji();C(A,S)},w=A=>{var S=ji();C(A,S)};H(m,A=>{t()==="user"?A(p):A(w,!1)})}h(l);var v=u(l,2),y=d(v),T=d(y),D=d(T,!0);h(T);var f=u(T,2);{var _=A=>{var S=Qi(),P=d(S,!0);h(S),Q(M=>j(P,M),[()=>(it(n()),R(()=>a(n())))]),C(A,S)};H(f,A=>{n()&&A(_)})}h(y);var x=u(y,2),$=d(x,!0);h(x);var k=u(x,2);{var I=A=>{var S=nn();Ye(S,5,r,wt,(P,M)=>{var V=sn(),X=d(V);{var ee=q=>{var g=Xi();C(q,g)},ne=q=>{var g=Zi();C(q,g)},re=q=>{var g=en();C(q,g)},he=q=>{var g=tn();C(q,g)};H(X,q=>{c(M),R(()=>c(M).type==="weather")?q(ee):(c(M),R(()=>c(M).type==="news")?q(ne,1):(c(M),R(()=>c(M).type==="open_url"||c(M).type==="search")?q(re,2):q(he,!1)))})}var te=u(X,2),de=d(te,!0);h(te),h(V),Q(()=>j(de,(c(M),R(()=>c(M).message||c(M).type)))),C(P,V)}),h(S),C(A,S)};H(k,A=>{it(r()),R(()=>r()&&r().length>0)&&A(I)})}h(v),h(o),Q(()=>{ge(o,1,`bubble ${t()??""}`,"svelte-1e5n1dp"),j(D,t()==="user"?"You":"NOVA"),j($,i())}),C(s,o),Re()}var on=L(`<div class="empty-state svelte-1jlre7m"><div class="logo-ring svelte-1jlre7m"><div class="inner-ring svelte-1jlre7m"></div> <svg viewBox="0 0 24 24" fill="currentColor" width="40" height="40" class="svelte-1jlre7m"><path d="M12 2a2 2 0 012 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 017 7h1a1 1 0 110 2h-1.17A7 7 0 0113 21.93V22h-2v-.07A7 7 0 013.17 16H2a1 1 0 110-2h1a7 7 0 017-7h1V5.73A2 2 0 0112 2zm0 7a5 5 0 00-5 5 5 5 0 005 5 5 5 0 005-5 5 5 0 00-5-5z" class="svelte-1jlre7m"></path></svg></div> <h2 class="svelte-1jlre7m">NOVA</h2> <p class="svelte-1jlre7m">Your AI Voice Assistant</p> <div class="suggestions svelte-1jlre7m"><span class="svelte-1jlre7m">"What's the weather today?"</span> <span class="svelte-1jlre7m">"Search for latest tech news"</span> <span class="svelte-1jlre7m">"Open YouTube"</span> <span class="svelte-1jlre7m">"Tell me a fun fact"</span></div></div>`),ln=L('<div class="typing-indicator svelte-1jlre7m"><div class="avatar-small svelte-1jlre7m"><svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14" class="svelte-1jlre7m"><path d="M12 2a2 2 0 012 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 017 7h1a1 1 0 110 2h-1.17A7 7 0 0113 21.93V22h-2v-.07A7 7 0 013.17 16H2a1 1 0 110-2h1a7 7 0 017-7h1V5.73A2 2 0 0112 2z" class="svelte-1jlre7m"></path></svg></div> <div class="dots svelte-1jlre7m"><span class="svelte-1jlre7m"></span><span class="svelte-1jlre7m"></span><span class="svelte-1jlre7m"></span></div></div>'),cn=L("<!> <!>",1),un=L('<div class="chat-window svelte-1jlre7m"><!></div>');function hn(s,e){Ie(e,!1);const t=()=>ke(ce,"$conversation",i),[i,n]=ze();let r=J(),a=!0;ai(()=>{a&&c(r)&&Ms(r,c(r).scrollTop=c(r).scrollHeight)});function o(){if(!c(r))return;const{scrollTop:v,scrollHeight:y,clientHeight:T}=c(r);a=y-v-T<100}xe();var l=un(),m=d(l);{var p=v=>{var y=on();C(v,y)},w=v=>{var y=cn(),T=rt(y);Ye(T,1,()=>t().messages,wt,(_,x)=>{an(_,{get role(){return c(x).role},get content(){return c(x).content},get timestamp(){return c(x).timestamp},get commands(){return c(x).commands}})});var D=u(T,2);{var f=_=>{var x=ln();C(_,x)};H(D,_=>{t().isLoading&&_(f)})}C(v,y)};H(m,v=>{t().messages.length===0?v(p):v(w,!1)})}h(l),bt(l,v=>z(r,v),()=>c(r)),Z("scroll",l,o),C(s,l),Re(),n()}function dn(){const{subscribe:s,update:e}=ot({isListening:!1,isSpeaking:!1,interimTranscript:"",volume:0,error:null,supported:!0});return{subscribe:s,setListening(t){e(i=>({...i,isListening:t,error:null}))},setSpeaking(t){e(i=>({...i,isSpeaking:t}))},setInterim(t){e(i=>({...i,interimTranscript:t}))},setVolume(t){e(i=>({...i,volume:t}))},setError(t){e(i=>({...i,error:t,isListening:!1}))},setSupported(t){e(i=>({...i,supported:t}))}}}const K=dn(),zt="nova-settings";function fn(){if(typeof localStorage>"u")return{};try{const s=localStorage.getItem(zt);return s?JSON.parse(s):{}}catch{return{}}}const ys={autoSpeak:!0,voiceName:"",speechRate:.95,speechPitch:.85,speechVolume:1,language:"en-GB",continuousListening:!0,cameraEnabled:!1,showSettings:!1};function vn(){const s={...ys,...fn()},{subscribe:e,update:t,set:i}=ot(s);function n(r){if(typeof localStorage<"u"){const{showSettings:a,...o}=r;localStorage.setItem(zt,JSON.stringify(o))}}return{subscribe:e,update(r,a){t(o=>{const l={...o,[r]:a};return n(l),l})},toggleSettings(){t(r=>({...r,showSettings:!r.showSettings}))},reset(){i({...ys}),typeof localStorage<"u"&&localStorage.removeItem(zt)}}}const me=vn();let ie=null,qe=null,Xe=null,We=null,ft=null,Ht=!1,Lt=null,Mt=null,vt=!1;function pn(){return!!(typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition))}function mn(s={}){if(!pn())return K.setSupported(!1),null;const e=window.SpeechRecognition||window.webkitSpeechRecognition;return ie=new e,ie.continuous=!0,ie.interimResults=!0,ie.lang=s.lang||"en-US",ie.maxAlternatives=1,ie}async function Bs(s,e,t="en-US"){if(ie||mn({lang:t}),!!ie){Lt=s,Mt=e,vt=!0,Ht=!0,ie.lang=t,ie.onresult=i=>{let n="",r="";for(let a=i.resultIndex;a<i.results.length;a++){const o=i.results[a][0].transcript;i.results[a].isFinal?r+=o:n+=o}K.setInterim(n||r),r&&Lt&&Lt(r.trim())},ie.onerror=i=>{i.error==="no-speech"||i.error==="aborted"||(K.setError(i.error),Mt&&Mt(i.error))},ie.onend=()=>{if(K.setInterim(""),vt&&Ht)try{setTimeout(()=>{vt&&ie&&ie.start()},100)}catch{}else K.setListening(!1),Ps()};try{ie.start(),K.setListening(!0),await gn()}catch(i){K.setError(i.message)}}}function Ds(){if(vt=!1,Ht=!1,ie)try{ie.stop()}catch{}K.setListening(!1),K.setInterim(""),Ps()}async function gn(){if(!(qe&&We))try{qe=new(window.AudioContext||window.webkitAudioContext),We=await navigator.mediaDevices.getUserMedia({audio:!0});const s=qe.createMediaStreamSource(We);Xe=qe.createAnalyser(),Xe.fftSize=256,s.connect(Xe);const e=new Uint8Array(Xe.frequencyBinCount);ft=setInterval(()=>{Xe.getByteFrequencyData(e);let t=0;for(let n=0;n<e.length;n++)t+=e[n];const i=t/e.length/255;K.setVolume(i)},50)}catch{}}function Ps(){ft&&(clearInterval(ft),ft=null),We&&(We.getTracks().forEach(s=>s.stop()),We=null),qe&&(qe.close().catch(()=>{}),qe=null),K.setVolume(0)}const yn=["Google UK English Male","Microsoft Ryan","Microsoft George","Daniel","James","Google UK English","English United Kingdom","en-GB","Male"];function es(){return!!(typeof window<"u"&&window.speechSynthesis)}function ts(){return es()?window.speechSynthesis.getVoices():[]}function _n(){const s=ts();if(!s.length)return null;for(const e of yn){const t=s.find(i=>i.name.includes(e)||i.lang.includes(e));if(t)return t}return s.find(e=>e.lang.startsWith("en"))||s[0]}function Vs(s,e={}){if(!es()||!s)return;qs();const t=new SpeechSynthesisUtterance(s);if(t.rate=e.rate??.95,t.pitch=e.pitch??.85,t.volume=e.volume??1,t.lang=e.lang||"en-GB",e.voiceName){const n=ts().find(r=>r.name===e.voiceName);n&&(t.voice=n)}else{const i=_n();i&&(t.voice=i)}t.onstart=()=>K.setSpeaking(!0),t.onend=()=>K.setSpeaking(!1),t.onerror=()=>K.setSpeaking(!1),window.speechSynthesis.speak(t)}function qs(){es()&&window.speechSynthesis.cancel(),K.setSpeaking(!1)}class bn{constructor(){this.isSpacePressed=!1,this.isAIResponding=!1,this.isContinuousMode=!1,this.speechQueue=[],this.isSpeaking=!1,this.interruptThreshold=.3,this.interruptionTimeout=null,this.pushToTalkKey=" "}async start(){var e;if(!this.isContinuousMode){this.isContinuousMode=!0;try{await Bs(t=>this.handleVoiceInput(t),t=>this.handleVoiceError(t),((e=me.get())==null?void 0:e.language)||"en-US")}catch(t){console.error("Failed to start voice recognition:",t),this.isContinuousMode=!1;return}this.addKeyboardListeners(),this.addInterruptionDetection()}}stop(){this.isContinuousMode=!1,this.isSpacePressed=!1,this.isAIResponding=!1,Ds(),this.removeKeyboardListeners(),this.removeInterruptionDetection(),this.clearInterruptionTimeout()}handleVoiceInput(e){var t;!e.trim()||!this.isContinuousMode||(console.log("Voice input detected:",e),this.isAIResponding&&(console.log("Interrupting AI response"),this.interruptAIResponse()),(t=this.onUserMessage)==null||t.call(this,e.trim()))}handleVoiceError(e){console.warn("Voice recognition error:",e),this.isContinuousMode&&setTimeout(()=>{this.isContinuousMode&&this.start()},1e3)}addKeyboardListeners(){this.keyDownHandler=e=>{e.key===this.pushToTalkKey&&!e.repeat&&(this.isSpacePressed=!0,K.setListening(!0),e.preventDefault())},this.keyUpHandler=e=>{e.key===this.pushToTalkKey&&(this.isSpacePressed=!1,e.preventDefault())},window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("keyup",this.keyUpHandler)}removeKeyboardListeners(){this.keyDownHandler&&(window.removeEventListener("keydown",this.keyDownHandler),this.keyDownHandler=null),this.keyUpHandler&&(window.removeEventListener("keyup",this.keyUpHandler),this.keyUpHandler=null)}addInterruptionDetection(){this.unsubscribe=K.subscribe(e=>{this.isAIResponding&&e.volume>this.interruptThreshold&&this.handleInterruption()})}removeInterruptionDetection(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}handleInterruption(){this.interruptionTimeout&&clearTimeout(this.interruptionTimeout),this.interruptionTimeout=setTimeout(()=>{this.isAIResponding&&this.interruptAIResponse()},300)}clearInterruptionTimeout(){this.interruptionTimeout&&(clearTimeout(this.interruptionTimeout),this.interruptionTimeout=null)}interruptAIResponse(){var e;console.log("Interrupting AI response..."),this.clearInterruptionTimeout(),qs(),this.isAIResponding=!1,this.speechQueue=[],this.isSpeaking=!1,(e=this.onInterruption)==null||e.call(this)}startAIResponse(){this.isAIResponding=!0,this.clearInterruptionTimeout()}endAIResponse(){this.isAIResponding=!1,this.clearInterruptionTimeout()}queueSpeech(e){e.trim()&&(this.speechQueue.push(e),this.isSpeaking||this.processSpeechQueue())}processSpeechQueue(){if(this.speechQueue.length===0){this.isSpeaking=!1;return}if(this.isAIResponding===!1){this.speechQueue=[],this.isSpeaking=!1;return}this.isSpeaking=!0;const e=this.speechQueue.shift(),t=me.get();Vs(e,{rate:(t==null?void 0:t.speechRate)??.95,pitch:(t==null?void 0:t.speechPitch)??.85,volume:(t==null?void 0:t.speechVolume)??1,voiceName:(t==null?void 0:t.voiceName)??"",lang:(t==null?void 0:t.language)??"en-US"}),setTimeout(()=>{const i=()=>{window.speechSynthesis.speaking?setTimeout(i,100):(this.isSpeaking=!1,this.processSpeechQueue())};setTimeout(i,300)},100)}onUserMessage(e){this.onUserMessage=e}onInterruption(e){this.onInterruption=e}isActive(){return this.isContinuousMode}isPushToTalkActive(){return this.isSpacePressed}}const ue=new bn;var wn=L('<div class="continuous-indicator svelte-mqozx4"><span class="indicator-dot svelte-mqozx4"></span> <span class="indicator-text svelte-mqozx4"><!></span></div>'),Sn=L('<div class="interim svelte-mqozx4"><span class="interim-dot svelte-mqozx4"></span> <span class="interim-text svelte-mqozx4"> </span></div>'),En=$e('<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24" class="svelte-mqozx4"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" class="svelte-mqozx4"></path><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" class="svelte-mqozx4"></path></svg>'),kn=$e('<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24" class="svelte-mqozx4"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" class="svelte-mqozx4"></path></svg>'),An=$e('<svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24" class="svelte-mqozx4"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" class="svelte-mqozx4"></path><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" class="svelte-mqozx4"></path></svg>'),Tn=L('<div class="listening-badge svelte-mqozx4"><span class="pulse-dot svelte-mqozx4"></span> ALWAYS LISTENING</div>'),Cn=L('<div class="warning svelte-mqozx4">Voice not supported in this browser. Use Chrome or Edge.</div>'),In=L('<div class="error-msg svelte-mqozx4"> </div>'),Rn=L('<div class="voice-controls svelte-mqozx4"><!> <!> <div class="controls-row svelte-mqozx4"><button><div></div> <div></div> <div></div> <div class="mic-inner svelte-mqozx4"><!></div></button> <!></div> <!> <!></div>');function xn(s,e){Ie(e,!1);const t=()=>ke(K,"$voice",n),i=()=>ke(me,"$settings",n),[n,r]=ze();let a=Pe(e,"onResult",8,()=>{}),o=Pe(e,"disabled",8,!1);function l(){o()||ue.isActive()||(t().isListening?Ds():Bs(g=>a()(g),g=>console.error("STT error:",g),i().language))}xe();var m=Rn(),p=d(m);{var w=g=>{var B=wn(),se=u(d(B),2),be=d(se);{var fe=pe=>{var ye=ls("PUSH-TO-TALK ACTIVE (HOLD SPACE)");C(pe,ye)},ve=ds(()=>(it(ue),R(()=>ue.isPushToTalkActive()))),we=pe=>{var ye=ls("CONTINUOUS LISTENING");C(pe,ye)};H(be,pe=>{c(ve)?pe(fe):pe(we,!1)})}h(se),h(B),C(g,B)},v=ds(()=>(it(ue),R(()=>ue.isActive())));H(p,g=>{c(v)&&g(w)})}var y=u(p,2);{var T=g=>{var B=Sn(),se=u(d(B),2),be=d(se,!0);h(se),h(B),Q(()=>j(be,(t(),R(()=>t().interimTranscript)))),C(g,B)};H(y,g=>{t(),R(()=>t().interimTranscript)&&g(T)})}var D=u(y,2),f=d(D);let _;var x=d(f);let $;var k=u(x,2);let I;var A=u(k,2);let S;var P=u(A,2),M=d(P);{var V=g=>{var B=En();C(g,B)},X=g=>{var B=kn();C(g,B)},ee=g=>{var B=An();C(g,B)};H(M,g=>{t(),R(()=>t().isListening)?g(V):(t(),R(()=>t().isSpeaking)?g(X,1):g(ee,!1))})}h(P),h(f);var ne=u(f,2);{var re=g=>{var B=Tn();C(g,B)};H(ne,g=>{t(),R(()=>t().isListening)&&g(re)})}h(D);var he=u(D,2);{var te=g=>{var B=Cn();C(g,B)};H(he,g=>{t(),R(()=>!t().supported)&&g(te)})}var de=u(he,2);{var q=g=>{var B=In(),se=d(B,!0);h(B),Q(()=>j(se,(t(),R(()=>t().error)))),C(g,B)};H(de,g=>{t(),R(()=>t().error)&&g(q)})}h(m),Q((g,B)=>{_=ge(f,1,"mic-button svelte-mqozx4",null,_,g),at(f,"title",B),$=ge(x,1,"mic-ring ring-1 svelte-mqozx4",null,$,{active:t().isListening}),I=ge(k,1,"mic-ring ring-2 svelte-mqozx4",null,I,{active:t().isListening}),S=ge(A,1,"mic-ring ring-3 svelte-mqozx4",null,S,{active:t().isListening})},[()=>({listening:t().isListening,speaking:t().isSpeaking,disabled:o()||ue.isActive()}),()=>(it(ue),t(),R(()=>ue.isActive()?"Continuous mode active - use spacebar":t().isListening?"Stop listening":"Start listening"))]),Z("click",f,l),C(s,m),Re(),r()}var Nn=L('<div><canvas width="400" height="60" class="svelte-lmximv"></canvas></div>');function On(s,e){Ie(e,!1);const t=()=>ke(K,"$voice",i),[i,n]=ze();let r=J(),a,o=Array(32).fill(0);function l(){const v=c(r).getContext("2d"),y=c(r).width,T=c(r).height,D=32,f=y/D-2;function _(){v.clearRect(0,0,y,T);for(let x=0;x<D;x++){let $;if(t().isListening){const P=t().volume,M=Math.sin(Date.now()/200+x*.3)*.5+.5;$=(P*.7+M*.3)*T*.8+4}else if(t().isSpeaking){const P=Math.sin(Date.now()/150+x*.4)*.5+.5,M=Math.sin(Date.now()/300)*.3+.7;$=P*M*T*.5+4}else $=(Math.sin(Date.now()/800+x*.2)*.1+.1)*T+2;o[x]+=($-o[x])*.15;const k=x*(f+2),I=o[x],A=(T-I)/2,S=v.createLinearGradient(k,A,k,A+I);t().isListening?(S.addColorStop(0,"rgba(255, 82, 82, 0.9)"),S.addColorStop(1,"rgba(255, 82, 82, 0.3)")):t().isSpeaking?(S.addColorStop(0,"rgba(108, 99, 255, 0.9)"),S.addColorStop(1,"rgba(168, 99, 255, 0.3)")):(S.addColorStop(0,"rgba(255, 255, 255, 0.15)"),S.addColorStop(1,"rgba(255, 255, 255, 0.05)")),v.fillStyle=S,v.beginPath(),v.roundRect(k,A,f,I,2),v.fill()}a=requestAnimationFrame(_)}a&&cancelAnimationFrame(a),_()}nt(()=>{a&&cancelAnimationFrame(a)}),Ke(()=>c(r),()=>{c(r)&&l()}),Qt(),xe();var m=Nn();let p;var w=d(m);bt(w,v=>z(r,v),()=>c(r)),h(m),Q(()=>p=ge(m,1,"waveform-container svelte-lmximv",null,p,{active:t().isListening||t().isSpeaking})),C(s,m),Re(),n()}var Ln=L('<option class="svelte-d580bl"> </option>'),Mn=L('<div class="overlay svelte-d580bl" role="button" tabindex="-1" aria-label="Close settings"></div> <div class="panel svelte-d580bl"><div class="panel-header svelte-d580bl"><h3 class="svelte-d580bl">Settings</h3> <button class="close-btn svelte-d580bl" aria-label="Close settings"><svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button></div> <div class="section svelte-d580bl"><h4 class="svelte-d580bl">Voice Output</h4> <label class="toggle-row svelte-d580bl"><span class="svelte-d580bl">Auto-speak responses</span> <input type="checkbox" class="svelte-d580bl"/></label> <label class="field svelte-d580bl"><span class="svelte-d580bl">Voice</span> <select class="svelte-d580bl"><option class="svelte-d580bl">Auto (Jarvis-like)</option><!></select></label> <label class="field svelte-d580bl"><span class="svelte-d580bl"> </span> <input type="range" min="0.5" max="2" step="0.1" class="svelte-d580bl"/></label> <label class="field svelte-d580bl"><span class="svelte-d580bl"> </span> <input type="range" min="0.5" max="2" step="0.1" class="svelte-d580bl"/></label> <label class="field svelte-d580bl"><span class="svelte-d580bl"> </span> <input type="range" min="0" max="1" step="0.1" class="svelte-d580bl"/></label></div> <div class="section svelte-d580bl"><h4 class="svelte-d580bl">Speech Input</h4> <label class="field svelte-d580bl"><span class="svelte-d580bl">Language</span> <select class="svelte-d580bl"><option class="svelte-d580bl">English (UK) - Jarvis default</option><option class="svelte-d580bl">English (US)</option><option class="svelte-d580bl">Hindi</option><option class="svelte-d580bl">Spanish</option><option class="svelte-d580bl">French</option><option class="svelte-d580bl">German</option><option class="svelte-d580bl">Japanese</option></select></label> <div class="info-box svelte-d580bl">Mic runs in <strong class="svelte-d580bl">continuous mode</strong> - it keeps listening until you manually click the mic button to stop.</div></div> <div class="section svelte-d580bl"><h4 class="svelte-d580bl">Camera / Vision</h4> <div class="info-box svelte-d580bl">When camera is enabled, N.O.V.A. can see you through your webcam. It sends a snapshot with each message to an Ollama vision model (llava). Toggle the camera from the main screen.</div></div> <div class="section svelte-d580bl"><button class="reset-btn svelte-d580bl">Reset to defaults</button></div></div>',1);function Bn(s,e){Ie(e,!1);const t=()=>ke(me,"$settings",i),[i,n]=ze();let r=J([]);_t(()=>{var w;a(),typeof window<"u"&&((w=window.speechSynthesis)==null||w.addEventListener("voiceschanged",a))});function a(){z(r,ts())}function o(){me.toggleSettings()}xe();var l=ri(),m=rt(l);{var p=w=>{var v=Mn(),y=rt(v),T=u(y,2),D=d(T),f=u(d(D),2);h(D);var _=u(D,2),x=u(d(_),2),$=u(d(x),2);Ve($),h(x);var k=u(x,2),I=u(d(k),2),A=d(I);A.value=A.__value="";var S=u(A);Ye(S,1,()=>c(r),wt,(b,oe)=>{var F=Ln(),N=d(F);h(F);var U={};Q(()=>{j(N,`${c(oe).name??""} (${c(oe).lang??""})`),U!==(U=c(oe).name)&&(F.value=(F.__value=c(oe).name)??"")}),C(b,F)}),h(I);var P;ps(I),h(k);var M=u(k,2),V=d(M),X=d(V);h(V);var ee=u(V,2);Ve(ee),h(M);var ne=u(M,2),re=d(ne),he=d(re);h(re);var te=u(re,2);Ve(te),h(ne);var de=u(ne,2),q=d(de),g=d(q);h(q);var B=u(q,2);Ve(B),h(de),h(_);var se=u(_,2),be=u(d(se),2),fe=u(d(be),2),ve=d(fe);ve.value=ve.__value="en-GB";var we=u(ve);we.value=we.__value="en-US";var pe=u(we);pe.value=pe.__value="hi-IN";var ye=u(pe);ye.value=ye.__value="es-ES";var Be=u(ye);Be.value=Be.__value="fr-FR";var Ne=u(Be);Ne.value=Ne.__value="de-DE";var De=u(Ne);De.value=De.__value="ja-JP",h(fe);var E;ps(fe),h(be),Xt(2),h(se);var G=u(se,4),ae=d(G);h(G),h(T),Q((b,oe,F)=>{Yi($,t().autoSpeak),P!==(P=t().voiceName)&&(I.value=(I.__value=t().voiceName)??"",$t(I,t().voiceName)),j(X,`Speed: ${b??""}x`),Rt(ee,t().speechRate),j(he,`Pitch: ${oe??""}`),Rt(te,t().speechPitch),j(g,`Volume: ${F??""}%`),Rt(B,t().speechVolume),E!==(E=t().language)&&(fe.value=(fe.__value=t().language)??"",$t(fe,t().language))},[()=>t().speechRate.toFixed(1),()=>t().speechPitch.toFixed(1),()=>Math.round(t().speechVolume*100)]),Z("click",y,o),Z("keydown",y,o),Z("click",f,o),Z("change",$,b=>me.update("autoSpeak",b.target.checked)),Z("change",I,b=>me.update("voiceName",b.target.value)),Z("input",ee,b=>me.update("speechRate",parseFloat(b.target.value))),Z("input",te,b=>me.update("speechPitch",parseFloat(b.target.value))),Z("input",B,b=>me.update("speechVolume",parseFloat(b.target.value))),Z("change",fe,b=>me.update("language",b.target.value)),Z("click",ae,()=>me.reset()),C(w,v)};H(m,w=>{t().showSettings&&w(p)})}C(s,l),Re(),n()}const Dn="/api";async function Us(s,e={}){const t=await fetch(`${Dn}${s}`,{headers:{"Content-Type":"application/json"},...e});if(!t.ok){const i=await t.json().catch(()=>({error:t.statusText}));throw new Error(i.error||"Request failed")}return t.json()}async function Pn(){return Us("/health")}async function Vn(s,e){return Us("/users/register",{method:"POST",body:JSON.stringify({name:s,email:e})})}var qn=L('<div class="model-badge svelte-193vlpn"> </div>'),Un=L('<div class="status-bar svelte-193vlpn"><div><span class="dot svelte-193vlpn"></span> <span>Server</span></div> <div><span class="dot svelte-193vlpn"></span> <span>Ollama</span></div> <!></div>');function $n(s,e){Ie(e,!1);let t=J({server:!1,ollama:!1,model:""}),i=J(!0);_t(()=>{n();const v=setInterval(n,3e4);return()=>clearInterval(v)});async function n(){var v,y,T;z(i,!0);try{const D=await Pn();z(t,{server:!0,ollama:((v=D.ollama)==null?void 0:v.running)||!1,model:((T=(y=D.ollama)==null?void 0:y.models)==null?void 0:T[0])||""})}catch{z(t,{server:!1,ollama:!1,model:""})}z(i,!1)}xe();var r=Un(),a=d(r);let o;var l=u(a,2);let m;var p=u(l,2);{var w=v=>{var y=qn(),T=d(y,!0);h(y),Q(()=>j(T,c(t).model)),C(v,y)};H(p,v=>{c(t).model&&v(w)})}h(r),Q(()=>{o=ge(a,1,"indicator svelte-193vlpn",null,o,{ok:c(t).server,error:!c(t).server&&!c(i)}),m=ge(l,1,"indicator svelte-193vlpn",null,m,{ok:c(t).ollama,error:!c(t).ollama&&!c(i)})}),C(s,r),Re()}function zn(){const{subscribe:s,update:e}=ot({enabled:!1,stream:null,hasPermission:!1,error:null});return{subscribe:s,setEnabled(t){e(i=>({...i,enabled:t}))},setStream(t){e(i=>({...i,stream:t,hasPermission:!!t}))},setError(t){e(i=>({...i,error:t}))}}}const Ue=zn();let Ge=null;async function Hn(){try{return Ge=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}}),Ue.setStream(Ge),Ue.setEnabled(!0),Ge}catch{return Ue.setError("Camera access denied. Please allow camera permissions."),null}}function _s(){Ge&&(Ge.getTracks().forEach(s=>s.stop()),Ge=null),Ue.setStream(null),Ue.setEnabled(!1)}function Fn(s){if(!s||s.readyState<2)return null;const e=document.createElement("canvas");return e.width=s.videoWidth||640,e.height=s.videoHeight||480,e.getContext("2d").drawImage(s,0,0,e.width,e.height),e.toDataURL("image/jpeg",.7).split(",")[1]}var Kn=L('<video autoplay="" playsinline="" class="camera-feed svelte-1auw75p"></video> <div class="camera-overlay svelte-1auw75p"><div class="scan-line svelte-1auw75p"></div> <div class="corner tl svelte-1auw75p"></div> <div class="corner tr svelte-1auw75p"></div> <div class="corner bl svelte-1auw75p"></div> <div class="corner br svelte-1auw75p"></div> <span class="camera-label svelte-1auw75p">LIVE</span></div>',3),Yn=L('<div class="camera-off svelte-1auw75p"><svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24" class="svelte-1auw75p"><path d="M18 10.48V6c0-1.1-.9-2-2-2H6.83l2 2H16v7.17l2 2v-4.69zm-1.41 9.93l1.41-1.41L3.41 4.41 2 5.82l1 1V18c0 1.1.9 2 2 2h12.17l1.42 1.41zM5 18V8.83L13.17 17H5z" class="svelte-1auw75p"></path></svg> <span class="svelte-1auw75p">Camera Off</span></div>'),Wn=$e('<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" class="svelte-1auw75p"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" class="svelte-1auw75p"></path></svg>'),Gn=$e('<svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" class="svelte-1auw75p"><path d="M18 10.48V6c0-1.1-.9-2-2-2H6.83l2 2H16v7.17l2 2v-4.69zm-1.41 9.93l1.41-1.41L3.41 4.41 2 5.82l1 1V18c0 1.1.9 2 2 2h12.17l1.42 1.41zM5 18V8.83L13.17 17H5z" class="svelte-1auw75p"></path></svg>'),Jn=L('<div class="camera-error svelte-1auw75p"> </div>'),jn=L("<div><!> <button><!></button> <!></div>");function bs(s,e){Ie(e,!1);const t=()=>ke(Ue,"$camera",i),[i,n]=ze();let r=Pe(e,"compact",8,!1),a=J();nt(()=>{_s()});async function o(){t().enabled?_s():await Hn()}Ke(()=>(c(a),t()),()=>{c(a)&&t().stream&&Ms(a,c(a).srcObject=t().stream)}),Qt(),xe();var l=jn();let m;var p=d(l);{var w=k=>{var I=Kn(),A=rt(I);A.muted=!0,bt(A,S=>z(a,S),()=>c(a)),Xt(2),C(k,I)},v=k=>{var I=Yn();C(k,I)};H(p,k=>{t(),R(()=>t().enabled)?k(w):k(v,!1)})}var y=u(p,2);let T;var D=d(y);{var f=k=>{var I=Wn();C(k,I)},_=k=>{var I=Gn();C(k,I)};H(D,k=>{t(),R(()=>t().enabled)?k(f):k(_,!1)})}h(y);var x=u(y,2);{var $=k=>{var I=Jn(),A=d(I,!0);h(I),Q(()=>j(A,(t(),R(()=>t().error)))),C(k,I)};H(x,k=>{t(),R(()=>t().error)&&k($)})}h(l),Q(()=>{m=ge(l,1,"camera-wrapper svelte-1auw75p",null,m,{compact:r(),active:t().enabled}),T=ge(y,1,"camera-toggle svelte-1auw75p",null,T,{on:t().enabled}),at(y,"title",(t(),R(()=>t().enabled?"Disable camera":"Enable camera"))),at(y,"aria-label",(t(),R(()=>t().enabled?"Disable camera":"Enable camera")))}),Z("click",y,o),C(s,l),Re(),n()}const Te=Object.create(null);Te.open="0";Te.close="1";Te.ping="2";Te.pong="3";Te.message="4";Te.upgrade="5";Te.noop="6";const pt=Object.create(null);Object.keys(Te).forEach(s=>{pt[Te[s]]=s});const Ft={type:"error",data:"parser error"},$s=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",zs=typeof ArrayBuffer=="function",Hs=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ss=({type:s,data:e},t,i)=>$s&&e instanceof Blob?t?i(e):ws(e,i):zs&&(e instanceof ArrayBuffer||Hs(e))?t?i(e):ws(new Blob([e]),i):i(Te[s]+(e||"")),ws=(s,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(s)};function Ss(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Bt;function Qn(s,e){if($s&&s.data instanceof Blob)return s.data.arrayBuffer().then(Ss).then(e);if(zs&&(s.data instanceof ArrayBuffer||Hs(s.data)))return e(Ss(s.data));ss(s,!1,t=>{Bt||(Bt=new TextEncoder),e(Bt.encode(t))})}const Es="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Es.length;s++)tt[Es.charCodeAt(s)]=s;const Xn=s=>{let e=s.length*.75,t=s.length,i,n=0,r,a,o,l;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const m=new ArrayBuffer(e),p=new Uint8Array(m);for(i=0;i<t;i+=4)r=tt[s.charCodeAt(i)],a=tt[s.charCodeAt(i+1)],o=tt[s.charCodeAt(i+2)],l=tt[s.charCodeAt(i+3)],p[n++]=r<<2|a>>4,p[n++]=(a&15)<<4|o>>2,p[n++]=(o&3)<<6|l&63;return m},Zn=typeof ArrayBuffer=="function",is=(s,e)=>{if(typeof s!="string")return{type:"message",data:Fs(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:er(s.substring(1),e)}:pt[t]?s.length>1?{type:pt[t],data:s.substring(1)}:{type:pt[t]}:Ft},er=(s,e)=>{if(Zn){const t=Xn(s);return Fs(t,e)}else return{base64:!0,data:s}},Fs=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Ks="",tr=(s,e)=>{const t=s.length,i=new Array(t);let n=0;s.forEach((r,a)=>{ss(r,!1,o=>{i[a]=o,++n===t&&e(i.join(Ks))})})},sr=(s,e)=>{const t=s.split(Ks),i=[];for(let n=0;n<t.length;n++){const r=is(t[n],e);if(i.push(r),r.type==="error")break}return i};function ir(){return new TransformStream({transform(s,e){Qn(s,t=>{const i=t.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{n=new Uint8Array(9);const r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(t)})}})}let Dt;function ut(s){return s.reduce((e,t)=>e+t.length,0)}function ht(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let i=0;for(let n=0;n<e;n++)t[n]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),t}function nr(s,e){Dt||(Dt=new TextDecoder);const t=[];let i=0,n=-1,r=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(i===0){if(ut(t)<1)break;const l=ht(t,1);r=(l[0]&128)===128,n=l[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(ut(t)<2)break;const l=ht(t,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(ut(t)<8)break;const l=ht(t,8),m=new DataView(l.buffer,l.byteOffset,l.length),p=m.getUint32(0);if(p>Math.pow(2,21)-1){o.enqueue(Ft);break}n=p*Math.pow(2,32)+m.getUint32(4),i=3}else{if(ut(t)<n)break;const l=ht(t,n);o.enqueue(is(r?l:Dt.decode(l),e)),i=0}if(n===0||n>s){o.enqueue(Ft);break}}}})}const Ys=4;function W(s){if(s)return rr(s)}function rr(s){for(var e in W.prototype)s[e]=W.prototype[e];return s}W.prototype.on=W.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};W.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};W.prototype.off=W.prototype.removeListener=W.prototype.removeAllListeners=W.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,n=0;n<t.length;n++)if(i=t[n],i===e||i.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+s],this};W.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,n=t.length;i<n;++i)t[i].apply(this,e)}return this};W.prototype.emitReserved=W.prototype.emit;W.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};W.prototype.hasListeners=function(s){return!!this.listeners(s).length};const St=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Se=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ar="arraybuffer";function Ws(s,...e){return e.reduce((t,i)=>(s.hasOwnProperty(i)&&(t[i]=s[i]),t),{})}const or=Se.setTimeout,lr=Se.clearTimeout;function Et(s,e){e.useNativeTimers?(s.setTimeoutFn=or.bind(Se),s.clearTimeoutFn=lr.bind(Se)):(s.setTimeoutFn=Se.setTimeout.bind(Se),s.clearTimeoutFn=Se.clearTimeout.bind(Se))}const cr=1.33;function ur(s){return typeof s=="string"?hr(s):Math.ceil((s.byteLength||s.size)*cr)}function hr(s){let e=0,t=0;for(let i=0,n=s.length;i<n;i++)e=s.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function Gs(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function dr(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function fr(s){let e={},t=s.split("&");for(let i=0,n=t.length;i<n;i++){let r=t[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class vr extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class ns extends W{constructor(e){super(),this.writable=!1,Et(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new vr(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=is(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=dr(e);return t.length?"?"+t:""}}class pr extends ns{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};sr(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,tr(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Gs()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Js=!1;try{Js=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const mr=Js;function gr(){}class yr extends pr{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class Ae extends W{constructor(e,t,i){super(),this.createRequest=e,Et(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=Ws(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Ae.requestsCount++,Ae.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=gr,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ae.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ae.requestsCount=0;Ae.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ks);else if(typeof addEventListener=="function"){const s="onpagehide"in Se?"pagehide":"unload";addEventListener(s,ks,!1)}}function ks(){for(let s in Ae.requests)Ae.requests.hasOwnProperty(s)&&Ae.requests[s].abort()}const _r=(function(){const s=js({xdomain:!1});return s&&s.responseType!==null})();class br extends yr{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=_r&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ae(js,this.uri(),e)}}function js(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||mr))return new XMLHttpRequest}catch{}if(!e)try{return new Se[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Qs=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class wr extends ns{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=Qs?{}:Ws(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],n=t===e.length-1;ss(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}n&&St(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Gs()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Pt=Se.WebSocket||Se.MozWebSocket;class Sr extends wr{createSocket(e,t,i){return Qs?new Pt(e,t,i):t?new Pt(e,t):new Pt(e)}doWrite(e,t){this.ws.send(t)}}class Er extends ns{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=nr(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),n=ir();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const r=()=>{i.read().then(({done:o,value:l})=>{o||(this.onPacket(l),r())}).catch(o=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],n=t===e.length-1;this._writer.write(i).then(()=>{n&&St(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const kr={websocket:Sr,webtransport:Er,polling:br},Ar=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Tr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Kt(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),i=s.indexOf("]");t!=-1&&i!=-1&&(s=s.substring(0,t)+s.substring(t,i).replace(/:/g,";")+s.substring(i,s.length));let n=Ar.exec(s||""),r={},a=14;for(;a--;)r[Tr[a]]=n[a]||"";return t!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Cr(r,r.path),r.queryKey=Ir(r,r.query),r}function Cr(s,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Ir(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,r){n&&(t[n]=r)}),t}const Yt=typeof addEventListener=="function"&&typeof removeEventListener=="function",mt=[];Yt&&addEventListener("offline",()=>{mt.forEach(s=>s())},!1);class Me extends W{constructor(e,t){if(super(),this.binaryType=ar,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=Kt(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=Kt(t.host).host);Et(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fr(this.opts.query)),Yt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},mt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Ys,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Me.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Me.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(t+=ur(n)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,St(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,n){if(typeof t=="function"&&(n=t,t=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:e,data:t,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(Me.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=mt.indexOf(this._offlineEventListener);i!==-1&&mt.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Me.protocol=Ys;class Rr extends Me{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;Me.priorWebsocketSuccess=!1;const n=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",w=>{if(!i)if(w.type==="pong"&&w.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Me.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(p(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=t.name,this.emitReserved("upgradeError",v)}}))};function r(){i||(i=!0,p(),t.close(),t=null)}const a=w=>{const v=new Error("probe error: "+w);v.transport=t.name,r(),this.emitReserved("upgradeError",v)};function o(){a("transport closed")}function l(){a("socket closed")}function m(w){t&&w.name!==t.name&&r()}const p=()=>{t.removeListener("open",n),t.removeListener("error",a),t.removeListener("close",o),this.off("close",l),this.off("upgrading",m)};t.once("open",n),t.once("error",a),t.once("close",o),this.once("close",l),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let xr=class extends Rr{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>kr[n]).filter(n=>!!n)),super(e,i)}};function Nr(s,e="",t){let i=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),i=Kt(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+e,i.href=i.protocol+"://"+r+(t&&t.port===i.port?"":":"+i.port),i}const Or=typeof ArrayBuffer=="function",Lr=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Xs=Object.prototype.toString,Mr=typeof Blob=="function"||typeof Blob<"u"&&Xs.call(Blob)==="[object BlobConstructor]",Br=typeof File=="function"||typeof File<"u"&&Xs.call(File)==="[object FileConstructor]";function rs(s){return Or&&(s instanceof ArrayBuffer||Lr(s))||Mr&&s instanceof Blob||Br&&s instanceof File}function gt(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,i=s.length;t<i;t++)if(gt(s[t]))return!0;return!1}if(rs(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return gt(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&gt(s[t]))return!0;return!1}function Dr(s){const e=[],t=s.data,i=s;return i.data=Wt(t,e),i.attachments=e.length,{packet:i,buffers:e}}function Wt(s,e){if(!s)return s;if(rs(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let i=0;i<s.length;i++)t[i]=Wt(s[i],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=Wt(s[i],e));return t}return s}function Pr(s,e){return s.data=Gt(s.data,e),delete s.attachments,s}function Gt(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=Gt(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=Gt(s[t],e));return s}const Vr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var O;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(O||(O={}));class qr{constructor(e){this.replacer=e}encode(e){return(e.type===O.EVENT||e.type===O.ACK)&&gt(e)?this.encodeAsBinary({type:e.type===O.EVENT?O.BINARY_EVENT:O.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===O.BINARY_EVENT||e.type===O.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Dr(e),i=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(i),n}}class as extends W{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===O.BINARY_EVENT;i||t.type===O.BINARY_ACK?(t.type=i?O.EVENT:O.ACK,this.reconstructor=new Ur(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(rs(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(O[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===O.BINARY_EVENT||i.type===O.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(a)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(r,t)}else i.nsp="/";const n=e.charAt(t+1);if(n!==""&&Number(n)==n){const r=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}i.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(as.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case O.CONNECT:return As(t);case O.DISCONNECT:return t===void 0;case O.CONNECT_ERROR:return typeof t=="string"||As(t);case O.EVENT:case O.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Vr.indexOf(t[0])===-1);case O.ACK:case O.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ur{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Pr(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function As(s){return Object.prototype.toString.call(s)==="[object Object]"}const $r=Object.freeze(Object.defineProperty({__proto__:null,Decoder:as,Encoder:qr,get PacketType(){return O}},Symbol.toStringTag,{value:"Module"}));function Ee(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const zr=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Zs extends W{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ee(e,"open",this.onopen.bind(this)),Ee(e,"packet",this.onpacket.bind(this)),Ee(e,"error",this.onerror.bind(this)),Ee(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,n,r;if(zr.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:O.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const p=this.ids++,w=t.pop();this._registerAckCallback(p,w),a.id=p}const o=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!o||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},n),a=(...o)=>{this.io.clearTimeoutFn(r),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((i,n)=>{const r=(a,o)=>a?n(a):i(o);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...r)=>(this._queue[0],n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:O.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case O.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case O.EVENT:case O.BINARY_EVENT:this.onevent(e);break;case O.ACK:case O.BINARY_ACK:this.onack(e);break;case O.DISCONNECT:this.ondisconnect();break;case O.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...n){i||(i=!0,t.packet({type:O.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:O.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function Je(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Je.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=(Math.floor(e*10)&1)==0?s-t:s+t}return Math.min(s,this.max)|0};Je.prototype.reset=function(){this.attempts=0};Je.prototype.setMin=function(s){this.ms=s};Je.prototype.setMax=function(s){this.max=s};Je.prototype.setJitter=function(s){this.jitter=s};class Jt extends W{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Et(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Je({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||$r;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new xr(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=Ee(t,"open",function(){i.onopen(),e&&e()}),r=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=Ee(t,"error",r);if(this._timeout!==!1){const o=this._timeout,l=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),t.close()},o);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ee(e,"ping",this.onping.bind(this)),Ee(e,"data",this.ondata.bind(this)),Ee(e,"error",this.onerror.bind(this)),Ee(e,"close",this.onclose.bind(this)),Ee(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){St(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new Zs(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ze={};function yt(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=Nr(s,e.path||"/socket.io"),i=t.source,n=t.id,r=t.path,a=Ze[n]&&r in Ze[n].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new Jt(i,e):(Ze[n]||(Ze[n]=new Jt(i,e)),l=Ze[n]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(yt,{Manager:Jt,Socket:Zs,io:yt,connect:yt});let Y=null;const st=new Map;function ei(){return Y!=null&&Y.connected||(Y=yt("/",{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:10}),Y.on("connect",()=>{He("status",{connected:!0})}),Y.on("disconnect",()=>{He("status",{connected:!1})}),Y.on("ai_response_start",s=>He("start",s)),Y.on("ai_response_chunk",s=>He("chunk",s)),Y.on("ai_response_complete",s=>He("complete",s)),Y.on("error",s=>He("error",s))),Y}function Hr(s,e,t=null,i=null){Y!=null&&Y.connected||ei(),Y.emit("chat_message",{message:s,conversationId:e,image:t,userId:i})}function dt(s,e){return st.has(s)||st.set(s,new Set),st.get(s).add(e),()=>st.get(s).delete(e)}function He(s,e){const t=st.get(s);t&&t.forEach(i=>i(e))}function Ts(){Y==null||Y.disconnect(),Y=null}var Fr=L('<div class="scan-line svelte-mv2iry"></div>'),Kr=L('<div class="data-point svelte-mv2iry"></div>'),Yr=L('<div><span class="role svelte-mv2iry"> </span> <span class="content"> </span></div>'),Wr=L('<div class="conversation-panel svelte-mv2iry"><div class="panel-header svelte-mv2iry"><span>RECENT INTERACTIONS</span></div> <div class="conversation-list svelte-mv2iry"></div></div>'),Gr=L('<div class="jarvis-hud svelte-mv2iry"><!> <!> <div class="status-panel svelte-mv2iry"><div class="panel-header svelte-mv2iry"><span class="system-name svelte-mv2iry">J.A.R.V.I.S. SYSTEM</span> <span class="timestamp svelte-mv2iry"> </span></div> <div class="status-grid svelte-mv2iry"><div class="status-item svelte-mv2iry"><span class="label svelte-mv2iry">SYSTEM STATUS:</span> <span> </span></div> <div class="status-item svelte-mv2iry"><span class="label svelte-mv2iry">CONNECTION:</span> <span> </span></div> <div class="status-item svelte-mv2iry"><span class="label svelte-mv2iry">SECURITY LEVEL:</span> <span class="value green svelte-mv2iry"> </span></div> <div class="status-item svelte-mv2iry"><span class="label svelte-mv2iry">VOICE ENGINE:</span> <span> </span></div></div></div> <!> <div class="data-panel svelte-mv2iry"><div class="panel-header svelte-mv2iry"><span>SYSTEM MONITORING</span></div> <div class="graphs svelte-mv2iry"><div class="graph-container svelte-mv2iry"><div class="graph-label svelte-mv2iry">CPU USAGE</div> <div class="graph-bar svelte-mv2iry"></div></div> <div class="graph-container svelte-mv2iry"><div class="graph-label svelte-mv2iry">MEMORY</div> <div class="graph-bar svelte-mv2iry"></div></div> <div class="graph-container svelte-mv2iry"><div class="graph-label svelte-mv2iry">NETWORK</div> <div class="graph-bar svelte-mv2iry"></div></div></div></div> <div class="commands-panel svelte-mv2iry"><div class="panel-header svelte-mv2iry"><span>QUICK COMMANDS</span></div> <div class="commands-list svelte-mv2iry"><button class="command-btn svelte-mv2iry">SYSTEM STATUS</button> <button class="command-btn svelte-mv2iry">OPEN APPLICATION</button> <button class="command-btn svelte-mv2iry">NETWORK INFO</button> <button class="command-btn svelte-mv2iry">SECURITY SCAN</button></div></div></div>');function Jr(s,e){Ie(e,!1);const t=()=>ke(ce,"$conversation",n),i=()=>ke(K,"$voice",n),[n,r]=ze(),a=J(),o=J(),l=J(),m=J();let p=J(),w=J([]),v=J([]),y,T;_t(()=>{D(),f(),_(),x()}),nt(()=>{y&&clearInterval(y),T&&clearInterval(T)});function D(){for(let N=0;N<20;N++)c(w).push({id:N,x:Math.random()*100,opacity:Math.random()*.3+.1,speed:Math.random()*2+1})}function f(){for(let N=0;N<15;N++)c(v).push({id:N,x:Math.random()*100,y:Math.random()*100,size:Math.random()*3+1,opacity:Math.random()*.7+.3})}function _(){y=setInterval(()=>{z(w,c(w).map(N=>({...N,x:(N.x+N.speed)%100})))},50)}function x(){T=setInterval(()=>{z(v,c(v).map(N=>({...N,opacity:Math.random()>.7?Math.random()*.7+.3:N.opacity,x:Math.random()*100,y:Math.random()*100})))},1e3)}function $(){return new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function k(){const N=t().isLoading,U=i().isSpeaking,le=i().isListening;return N?"PROCESSING":U?"SPEAKING":le?"LISTENING":"STANDBY"}function I(){return i().supported?"CONNECTED":"OFFLINE"}function A(){const N=k();return N==="STANDBY"?"LEVEL 5 - MAXIMUM":N==="PROCESSING"?"LEVEL 3 - ENHANCED":"LEVEL 4 - STANDARD"}Ke(()=>{},()=>{z(a,$())}),Ke(()=>{},()=>{z(o,k())}),Ke(()=>{},()=>{z(l,I())}),Ke(()=>{},()=>{z(m,A())}),Qt(),xe();var S=Gr(),P=d(S);Ye(P,1,()=>c(w),N=>N.id,(N,U)=>{var le=Fr();Q(()=>Qe(le,`left: ${c(U),R(()=>c(U).x)??""}%; opacity: ${c(U),R(()=>c(U).opacity)??""};`)),C(N,le)});var M=u(P,2);Ye(M,1,()=>c(v),N=>N.id,(N,U)=>{var le=Kr();Q(()=>Qe(le,`
        left: ${c(U),R(()=>c(U).x)??""}%; 
        top: ${c(U),R(()=>c(U).y)??""}%; 
        width: ${c(U),R(()=>c(U).size)??""}px; 
        height: ${c(U),R(()=>c(U).size)??""}px; 
        opacity: ${c(U),R(()=>c(U).opacity)??""};
      `)),C(N,le)});var V=u(M,2),X=d(V),ee=u(d(X),2),ne=d(ee,!0);h(ee),h(X);var re=u(X,2),he=d(re),te=u(d(he),2),de=d(te,!0);h(te),h(he);var q=u(he,2),g=u(d(q),2),B=d(g,!0);h(g),h(q);var se=u(q,2),be=u(d(se),2),fe=d(be,!0);h(be),h(se);var ve=u(se,2),we=u(d(ve),2),pe=d(we,!0);h(we),h(ve),h(re),h(V);var ye=u(V,2);{var Be=N=>{var U=Wr(),le=u(d(U),2);Ye(le,5,()=>(t(),R(()=>t().messages.slice(-3))),wt,(ti,Oe)=>{var lt=Yr(),kt=d(lt),si=d(kt);h(kt);var os=u(kt,2),ii=d(os);h(os),h(lt),Q(ni=>{ge(lt,1,`conversation-item ${c(Oe),R(()=>c(Oe).role)??""}`,"svelte-mv2iry"),j(si,`${c(Oe),R(()=>c(Oe).role==="user"?"USER":"JARVIS")??""}:`),j(ii,`${ni??""}${c(Oe),R(()=>c(Oe).content.length>60?"...":"")??""}`)},[()=>(c(Oe),R(()=>c(Oe).content.substring(0,60)))]),C(ti,lt)}),h(le),h(U),C(N,U)};H(ye,N=>{t(),R(()=>t().messages.length>0)&&N(Be)})}var Ne=u(ye,2),De=u(d(Ne),2),E=d(De),G=u(d(E),2);Qe(G,`width: ${R(()=>Math.random()*60+20)??""}%`),h(E);var ae=u(E,2),b=u(d(ae),2);Qe(b,`width: ${R(()=>Math.random()*70+10)??""}%`),h(ae);var oe=u(ae,2),F=u(d(oe),2);Qe(F,`width: ${R(()=>Math.random()*50+30)??""}%`),h(oe),h(De),h(Ne),Xt(2),h(S),bt(S,N=>z(p,N),()=>c(p)),Q(()=>{j(ne,c(a)),ge(te,1,`value ${c(o)==="STANDBY"?"green":c(o)==="PROCESSING"?"yellow":"blue"}`,"svelte-mv2iry"),j(de,c(o)),ge(g,1,`value ${c(l)==="CONNECTED"?"green":"red"}`,"svelte-mv2iry"),j(B,c(l)),j(fe,c(m)),ge(we,1,`value ${i(),R(()=>i().isSpeaking?"blue":"green")??""}`,"svelte-mv2iry"),j(pe,(i(),R(()=>i().isSpeaking?"ACTIVE":"READY")))}),C(s,S),Re(),r()}class jr{constructor(){this.isMonitoring=!1,this.monitoringInterval=null,this.lastInteractionTime=Date.now(),this.systemChecks=[],this.notifications=[],this.adviceQueue=[]}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,this.lastInteractionTime=Date.now(),this.monitoringInterval=setInterval(()=>{this.performSystemCheck(),this.checkForNotifications(),this.offerProactiveAssistance()},3e4),this.setupInteractionMonitoring())}stopMonitoring(){this.isMonitoring=!1,this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null)}setupInteractionMonitoring(){this.conversationUnsubscribe=ce.subscribe(e=>{e.messages.length>0&&(this.lastInteractionTime=Date.now())}),this.voiceUnsubscribe=K.subscribe(e=>{(e.isListening||e.isSpeaking)&&(this.lastInteractionTime=Date.now())})}performSystemCheck(){Date.now()-this.lastInteractionTime>3e5&&this.offerIdleAssistance();const i=new Date().getHours();i>=6&&i<12?this.offerMorningGreeting():i>=12&&i<17?this.offerAfternoonUpdate():i>=17&&i<22?this.offerEveningBriefing():this.offerNightlyStatus(),this.checkDailyReminders()}checkForNotifications(){const e=[];Math.random()>.95&&e.push({type:"system",priority:"low",message:"System maintenance scheduled for tonight",timestamp:Date.now()}),this.notifications=[...this.notifications,...e]}offerProactiveAssistance(){const t=Date.now()-this.lastInteractionTime;if(t<1e4)return;const i=new Date().getHours();new Date().getDay(),t>12e4&&this.offerIdleSuggestions(),i===8&&Math.random()>.7&&this.addAdvice("Sir, would you like me to prepare your morning briefing?"),i===18&&Math.random()>.7&&this.addAdvice("Sir, shall I prepare tomorrow's schedule overview?")}offerIdleAssistance(){const e=Date.now()-this.lastInteractionTime;e>6e5?this.addAdvice("Sir, I notice you've been inactive. Shall I put the system in standby mode?"):e>3e5&&this.addAdvice("Sir, would you like a status update on any ongoing processes?")}offerMorningGreeting(){Math.random()>.8&&this.addAdvice("Good morning, sir. The weather is favorable for your commute. Traffic should be light.")}offerAfternoonUpdate(){Math.random()>.8&&this.addAdvice("Good afternoon, sir. I've optimized your system performance and cleared temporary files.")}offerEveningBriefing(){Math.random()>.8&&this.addAdvice("Good evening, sir. Shall I prepare tomorrow's agenda review?")}offerNightlyStatus(){Math.random()>.8&&this.addAdvice("Good evening, sir. System security scan completed. All clear.")}checkDailyReminders(){const e=new Date,t=e.getHours(),i=e.getDay();t===9&&i===1&&Math.random()>.7&&this.addAdvice("Sir, today is Monday. Shall I prioritize your weekly planning tasks?"),t===17&&i>=1&&i<=5&&Math.random()>.7&&this.addAdvice("Sir, shall I prepare your commute information for departure?")}offerIdleSuggestions(){const e=["Sir, would you like me to optimize system performance?","Shall I check for any pending updates?","Would you like a brief status report on system operations?","Sir, I can adjust your desktop environment if you're taking a break.","Shall I dim the screen to reduce eye strain?"];if(Math.random()>.6){const t=e[Math.floor(Math.random()*e.length)];this.addAdvice(t)}}addAdvice(e){this.adviceQueue.push({id:Date.now(),message:e,timestamp:Date.now(),priority:"medium"}),this.adviceQueue.length>5&&this.adviceQueue.shift()}getRecentAdvice(){return this.adviceQueue.slice(-3)}getSystemStatus(){return{lastInteraction:this.lastInteractionTime,isMonitoring:this.isMonitoring,notificationCount:this.notifications.length,adviceQueueLength:this.adviceQueue.length,idleTime:Date.now()-this.lastInteractionTime,timeOfDay:this.getTimeOfDay(),dayOfWeek:new Date().getDay()}}getTimeOfDay(){const e=new Date().getHours();return e>=6&&e<12?"morning":e>=12&&e<17?"afternoon":e>=17&&e<22?"evening":"night"}triggerImmediateAssistance(e,t={}){switch(e){case"system_status":return"Sir, system status: All systems operational. CPU usage at 23%, memory at 45%. No critical alerts.";case"security_scan":return"Security scan initiated. No threats detected. System remains secure.";case"performance_optimize":return"Performance optimization complete. System running at peak efficiency.";case"schedule_review":return"Reviewing your schedule... Upcoming meetings: 2 today, 1 tomorrow. Nothing urgent requires immediate attention.";case"commute_info":return"Traffic is light. Your usual route should take approximately 25 minutes.";default:return"Sir, I'm ready to assist. What would you like me to do?"}}}const Cs=new jr;function Qr(){const{subscribe:s,set:e,update:t}=ot({userId:null,name:"",email:""});return{subscribe:s,setProfile(i){e({userId:i.id,name:i.name,email:i.email})}}}const Vt=Qr();var Xr=L('<div class="camera-sidebar svelte-1uha8ag"><!></div>'),Zr=L('<div class="modal-backdrop svelte-1uha8ag"><div class="modal svelte-1uha8ag"><h3 class="svelte-1uha8ag">Enter your details</h3> <div class="field svelte-1uha8ag"><label for="user-name">Name</label> <input id="user-name" type="text" placeholder="Your name" class="svelte-1uha8ag"/></div> <div class="field svelte-1uha8ag"><label for="user-email">Email</label> <input id="user-email" type="email" placeholder="you@example.com" class="svelte-1uha8ag"/></div> <button class="submit-btn svelte-1uha8ag">Continue</button></div></div>'),ea=L('<div class="app svelte-1uha8ag"><header class="header svelte-1uha8ag"><div class="header-left svelte-1uha8ag"><div class="logo svelte-1uha8ag"><svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 2a2 2 0 012 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 017 7h1a1 1 0 110 2h-1.17A7 7 0 0113 21.93V22h-2v-.07A7 7 0 013.17 16H2a1 1 0 110-2h1a7 7 0 017-7h1V5.73A2 2 0 0112 2z"></path></svg> <span class="logo-text svelte-1uha8ag">N.O.V.A.</span></div> <!></div> <div class="header-right svelte-1uha8ag"><button class="icon-btn svelte-1uha8ag" title="New conversation"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg></button> <button class="icon-btn svelte-1uha8ag" title="Settings"><svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"></path></svg></button></div></header> <div class="main-area svelte-1uha8ag"><!> <!></div> <div class="controls-area svelte-1uha8ag"><div class="controls-top svelte-1uha8ag"><!> <!></div> <!> <div class="text-input-row svelte-1uha8ag"><input type="text" placeholder="Type a message or just speak..." class="svelte-1uha8ag"/> <button class="send-btn svelte-1uha8ag" aria-label="Send message"><svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg></button></div></div> <!></div> <!> <!>',1);function ca(s,e){Ie(e,!1);const t=()=>ke(me,"$settings",r),i=()=>ke(Ue,"$camera",r),n=()=>ke(ce,"$conversation",r),[r,a]=ze();let o=J(""),l="",m=[],p=!1,w=J(!1),v=J(!1),y=J(""),T=J("");function D(){return document.querySelector(".camera-feed")}_t(async()=>{const E=localStorage.getItem("nova-conversation-id");E&&ce.init(E),console.log("Starting continuous conversation..."),await ue.start(),console.log("Continuous conversation started, setting up callbacks"),ue.onUserMessage(b=>{console.log("Continuous conversation received text:",b),f(b)}),ue.onInterruption(()=>{console.log("Conversation interrupted")}),ei();const G=localStorage.getItem("nova-user-profile");if(G){const b=JSON.parse(G);Vt.setProfile(b)}else z(v,!0);const ae=b=>{b.ctrlKey&&b.shiftKey&&b.key==="J"&&(b.preventDefault(),z(w,!c(w)),p=c(w)),b.ctrlKey&&b.shiftKey&&b.key==="A"&&(b.preventDefault(),p=!p,p&&z(w,!0))};window.addEventListener("keydown",ae),m.push(()=>{window.removeEventListener("keydown",ae)}),p&&Cs.startMonitoring(),m.push(dt("start",({conversationId:b})=>{ce.init(b),localStorage.setItem("nova-conversation-id",b),l="",ce.addStreamingMessage(),ce.setLoading(!0),ue.startAIResponse()})),m.push(dt("chunk",({chunk:b})=>{l+=b,ce.updateStreamingMessage(l),t().autoSpeak&&b.trim()&&ue.queueSpeech(b)})),m.push(dt("complete",({response:b,conversationId:oe,commands:F})=>{ce.completeStreamingMessage(b,F),ce.setLoading(!1),l="",ue.endAIResponse(),t().autoSpeak&&b&&Vs(b,{rate:t().speechRate,pitch:t().speechPitch,volume:t().speechVolume,voiceName:t().voiceName,lang:t().language})})),m.push(dt("error",({message:b})=>{ce.setLoading(!1),ce.addMessage("assistant",`Error: ${b}`),ue.endAIResponse()}))}),nt(()=>{m.forEach(E=>E&&E()),Ts()});async function f(E){if(!(E!=null&&E.trim()))return;console.log("handleSend called with text:",E);const G=E.trim();z(o,"");let ae;ce.subscribe(F=>ae=F)(),ce.addMessage("user",G);let b=null;if(i().enabled){const F=D();F&&(b=Fn(F))}console.log("Sending message via WebSocket:",G);let oe;Vt.subscribe(F=>oe=F)(),Hr(G,ae.conversationId,b,oe.userId)}function _(E){f(E)}function x(E){E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),f(c(o)))}function $(){ce.clear(),localStorage.removeItem("nova-conversation-id")}nt(()=>{m.forEach(E=>E&&E()),Ts(),ue.stop(),Cs.stopMonitoring()});async function k(){if(!c(y).trim()||!c(T).trim())return;const E=await Vn(c(y).trim(),c(T).trim());Vt.setProfile(E),localStorage.setItem("nova-user-profile",JSON.stringify(E)),z(v,!1)}xe();var I=ea(),A=rt(I),S=d(A),P=d(S),M=u(d(P),2);$n(M,{}),h(P);var V=u(P,2),X=d(V),ee=u(X,2);h(V),h(S);var ne=u(S,2),re=d(ne);{var he=E=>{var G=Xr(),ae=d(G);bs(ae,{compact:!0}),h(G),C(E,G)};H(re,E=>{i().enabled&&E(he)})}var te=u(re,2);hn(te,{}),h(ne);var de=u(ne,2),q=d(de),g=d(q);{var B=E=>{bs(E,{compact:!0})};H(g,E=>{i().enabled||E(B)})}var se=u(g,2);On(se,{}),h(q);var be=u(q,2);xn(be,{onResult:_,get disabled(){return n().isLoading}});var fe=u(be,2),ve=d(fe);Ve(ve);var we=u(ve,2);h(fe),h(de);var pe=u(de,2);Bn(pe,{}),h(A);var ye=u(A,2);{var Be=E=>{Jr(E,{})};H(ye,E=>{c(w)&&E(Be)})}var Ne=u(ye,2);{var De=E=>{var G=Zr(),ae=d(G),b=u(d(ae),2),oe=u(d(b),2);Ve(oe),h(b);var F=u(b,2),N=u(d(F),2);Ve(N),h(F);var U=u(F,2);h(ae),h(G),Q(le=>U.disabled=le,[()=>!c(y).trim()||!c(T).trim()]),xt(oe,()=>c(y),le=>z(y,le)),xt(N,()=>c(T),le=>z(T,le)),Z("click",U,k),C(E,G)};H(Ne,E=>{c(v)&&E(De)})}Q(E=>{ve.disabled=n().isLoading,we.disabled=E},[()=>!c(o).trim()||n().isLoading]),Z("click",X,$),Z("click",ee,()=>me.toggleSettings()),xt(ve,()=>c(o),E=>z(o,E)),Z("keydown",ve,x),Z("click",we,()=>f(c(o))),C(s,I),Re(),a()}export{ca as component};
