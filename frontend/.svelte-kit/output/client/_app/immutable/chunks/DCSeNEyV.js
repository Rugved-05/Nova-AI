var W=Object.defineProperty;var U=s=>{throw TypeError(s)};var X=(s,e,t)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var y=(s,e,t)=>X(s,typeof e!="symbol"?e+"":e,t),F=(s,e,t)=>e.has(s)||U("Cannot "+t);var a=(s,e,t)=>(F(s,e,"read from private field"),t?t.call(s):e.get(s)),b=(s,e,t)=>e.has(s)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),x=(s,e,t,r)=>(F(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);import{H as $,I as j,J as N,K as ee,y as C,L as H,m as M,D as Z,M as se,N as te,O as re,n as ae,P as ie,Q as ne,S as fe,U as ue,V as ce,F as he,W as k,X as de,Y as le,b as G,Z as oe,_ as J,$ as _e,a0 as ve,o as q,a1 as be,g as m,a2 as K,a3 as ge,a4 as Se,a5 as Te,a6 as Ae,z as Ie,a7 as Pe,w as Ee,a8 as Re,a9 as pe,aa as me,ab as Oe,ac as De,f as Ne,ad as Me,ae as we}from"./IImCMv-Z.js";import{s as Le,g as Ye}from"./CK6mn_4X.js";var o,v,d,g,I,P,O;class Be{constructor(e,t=!0){y(this,"anchor");b(this,o,new Map);b(this,v,new Map);b(this,d,new Map);b(this,g,new Set);b(this,I,!0);b(this,P,()=>{var e=$;if(a(this,o).has(e)){var t=a(this,o).get(e),r=a(this,v).get(t);if(r)j(r),a(this,g).delete(t);else{var n=a(this,d).get(t);n&&(a(this,v).set(t,n.effect),a(this,d).delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),r=n.effect)}for(const[i,u]of a(this,o)){if(a(this,o).delete(i),i===e)break;const f=a(this,d).get(u);f&&(N(f.effect),a(this,d).delete(u))}for(const[i,u]of a(this,v)){if(i===t||a(this,g).has(i))continue;const f=()=>{if(Array.from(a(this,o).values()).includes(i)){var l=document.createDocumentFragment();se(u,l),l.append(C()),a(this,d).set(i,{effect:u,fragment:l})}else N(u);a(this,g).delete(i),a(this,v).delete(i)};a(this,I)||!r?(a(this,g).add(i),ee(u,f,!1)):f()}}});b(this,O,e=>{a(this,o).delete(e);const t=Array.from(a(this,o).values());for(const[r,n]of a(this,d))t.includes(r)||(N(n.effect),a(this,d).delete(r))});this.anchor=e,x(this,I,t)}ensure(e,t){var r=$,n=te();if(t&&!a(this,v).has(e)&&!a(this,d).has(e))if(n){var i=document.createDocumentFragment(),u=C();i.append(u),a(this,d).set(e,{effect:H(()=>t(u)),fragment:i})}else a(this,v).set(e,H(()=>t(this.anchor)));if(a(this,o).set(r,e),n){for(const[f,c]of a(this,v))f===e?r.unskip_effect(c):r.skip_effect(c);for(const[f,c]of a(this,d))f===e?r.unskip_effect(c.effect):r.skip_effect(c.effect);r.oncommit(a(this,P)),r.ondiscard(a(this,O))}else M&&(this.anchor=Z),a(this,P).call(this)}}o=new WeakMap,v=new WeakMap,d=new WeakMap,g=new WeakMap,I=new WeakMap,P=new WeakMap,O=new WeakMap;function $e(s,e,t=!1){var r;M&&(r=Z,ae());var n=new Be(s),i=t?ie:0;function u(f,c){if(M){var l=ne(r),_;if(l===fe?_=0:l===ue?_=!1:_=parseInt(l.substring(1)),f!==_){var E=ce();he(E),n.anchor=E,k(!1),n.ensure(f,c),k(!0);return}}n.ensure(f,c)}re(()=>{var f=!1;e((c,l=0)=>{f=!0,u(l,c)}),f||u(!1,null)},i)}function z(s,e){return s===e||(s==null?void 0:s[J])===e}function Ce(s={},e,t,r){return de(()=>{var n,i;return le(()=>{n=i,i=[],G(()=>{s!==t(...i)&&(e(s,...i),n&&z(t(...n),s)&&e(null,...n))})}),()=>{oe(()=>{i&&z(t(...i),s)&&e(null,...i)})}}),s}let p=!1,w=Symbol();function He(s,e,t){const r=t[e]??(t[e]={store:null,source:be(void 0),unsubscribe:q});if(r.store!==s&&!(w in t))if(r.unsubscribe(),r.store=s??null,s==null)r.source.v=void 0,r.unsubscribe=q;else{var n=!0;r.unsubscribe=Le(s,i=>{n?r.source.v=i:K(r.source,i)}),n=!1}return s&&w in t?Ye(s):m(r.source)}function ke(){const s={};function e(){_e(()=>{for(var t in s)s[t].unsubscribe();ve(s,w,{enumerable:!1,value:!0})})}return[s,e]}function Ue(s){var e=p;try{return p=!1,[s(),p]}finally{p=e}}function qe(s,e,t,r){var Y;var n=!Ee||(t&Re)!==0,i=(t&pe)!==0,u=(t&we)!==0,f=r,c=!0,l=()=>(c&&(c=!1,f=u?G(r):r),f),_;if(i){var E=J in s||De in s;_=((Y=ge(s,e))==null?void 0:Y.set)??(E&&e in s?h=>s[e]=h:void 0)}var T,L=!1;i?[T,L]=Ue(()=>s[e]):T=s[e],T===void 0&&r!==void 0&&(T=l(),_&&(n&&Se(),_(T)));var S;if(n?S=()=>{var h=s[e];return h===void 0?l():(c=!0,h)}:S=()=>{var h=s[e];return h!==void 0&&(f=void 0),h===void 0?f:h},n&&(t&Te)===0)return S;if(_){var Q=s.$$legacy;return(function(h,R){return arguments.length>0?((!n||!R||Q||L)&&_(R?S():h),h):S()})}var D=!1,A=((t&Me)!==0?Ne:me)(()=>(D=!1,S()));i&&m(A);var V=Ie;return(function(h,R){if(arguments.length>0){const B=R?m(A):n&&i?Ae(h):h;return K(A,B),D=!0,f!==void 0&&(f=B),h}return Oe&&D||(V.f&Pe)!==0?A.v:m(A)})}export{Be as B,He as a,Ce as b,$e as i,qe as p,ke as s};
